// var payload = "0811000000f9d0e26a6a00000000000000000000000000000000f00f07ef00f00050001503c8004502715306b50000b600004208e7180000430f7044000002f10000639d100000000000000000f9d0e26a6000000000000000000000000000000000ef0f07ef00f00050001503c8004502715306b50000b600004208e7180000430f7044000002f10000639d100000000000000000f9d0e2667800000000000000000000000000000000000f07ef01f00150001503c8004502715606b50000b60000420baa180000430f8444000002f10000639d100000000000000000f9d0e0b0f800000000000000000000000000000000000f07ef01f00150011504c8004502715b06b50000b60000422f4c180000430fb844000002f10000639d100000000000000000f9d0dc1d1800000000000000000000000000000000000f07ef01f00150011504c8004502715b06b50000b60000422f49180000430fb844000002f10000639d100000000000000000f9d0d7893800000000000000000000000000000000000f07ef01f00150011503c8004502715b06b50000b60000422f4c180000430fb844000002f10000639d100000000000000000f9d0d2f55800000000000000000000000000000000000f07ef01f00150011503c8004502715b06b50000b60000422f4d180000430fb844000002f10000639d100000000000000000f9d0ce617800000000000000000000000000000000000f07ef01f00150011503c8004502715b06b50000b60000422f4a180000430fb844000002f10000639d100000000000000000f9d0c9cd9800000000000000000000000000000000000f07ef01f00150011504c8004502715b06b50000b60000422f4e180000430fb844000002f10000639d100000000000000000f9d0c539b800000000000000000000000000000000000f07ef01f00150011504c8004502715b06b50000b60000422f4e180000430fb844000002f10000639d100000000000000000f9d0c0a5d800000000000000000000000000000000000f07ef01f00150011504c8004502715b06b50000b60000422f50180000430fb844000002f10000639d100000000000000000f9d0bc11f800000000000000000000000000000000000f07ef01f00150011504c8004502715b06b50000b60000422f49180000430fb844000002f10000639d100000000000000000f9d0b30d6000000000000000000000000000000000000f07ef01f00150011503c8004502715b06b50000b60000422f4c180000430fb844000002f10000639d100000000000000000f9d0ae798000000000000000000000000000000000000f07ef01f00150011503c8004502715b06b50000b60000422f4e180000430fb844000002f10000639d100000000000000000f9d0a9e5a000000000000000000000000000000000000f07ef01f00150011504c8004502715b06b50000b60000422f50180000430fb844000002f10000639d100000000000000000f9d0a551c000000000000000000000000000000000000f07ef01f00150011503c8004502715b06b50000b60000422f49180000430fb844000002f10000639d100000000000000000f9d0a0bde000000000000000000000000000000000000f07ef01f00150011503c8004502715b06b50000b60000422f4e180000430fb844000002f10000639d1000000000001100005249";
// var payload = "0c01060000005f4750533a31205361743a3131204c61743a35302e343338383038204c6f6e673a33302e34343037383620416c743a3137352053706565643a30204469723a393720446174653a20323032302f332f32342054696d653a2031303a31303a3433";
var payload = "0c010600000014494f2049443a36362056616c75653a3132303336";
// var payload = "081600000170ced4d6a000122b6b481e1264ac000000000000000001000112ff8f000000000170ced042c000122b6b481e1264ac000000000000000001000112ff93000000000170cecbaee000122b6b481e1264ac000000000000000001000111002e000000000170cec71b0000122b6b481e1264ac0000000000000000070101000311003612ff9b13fc1500030b0000000035464ef4ee00000000000000000e0000000017fb346000000170cebdf72800122b6b481e1264ac00000000000000001307ef01f00150011504c8004502010009b50000b60000422f62180000cd6a50ce071d430f9c44000009008303f10000639dc7000000001000002e830000000170ceb9635200122b6b481e1264ac00000000000000ce0e06ef01f00150011504c800450208b50000b60000422f46180000cd6a50ce071d430f9d440000000000000170ceb9634800122b6b481e1264ac00000000000000f00d06ef01f00150011504c800450207b50000b60000422f46180000cd6a50430f9d440000000000000170ceb95f6000122b6b481e1264ac00000000000000ef0d06ef01f00150011504c800450207b50000b60000422f46180000cd6a50430f9d440000000000000170ceb8423800122b6b481e1264ac000000000000000002000002f10000639dc7000000000000000170ceb3ae5800122b6b481e1264ac000000000000000002000002f10000639dc7000000000000000170ceaf1a7800122b6b481e1264ac0000000000000000010001440000000000000170ceaa869800122b6b481e1264ac0000000000000000010001b60000000000000170cea5f2b800122b6b481e1264ac0000000000000000010001b50000000000000170cea15ed800122b6b481e1264ac00000000000000000101c80000000000000170ce9ccaf800122b6b481e1264ac0000000000000000090550011504c8004502715902cd6a4f430f9d02f10000639d1000002e830000000170ce98371800122b6b481e1264ac00000000000000f00d05f0011504c8004502715906b50000b60000180000cd6a4f430f9e44000002f10000639d1000002e830000000170ce96b46000122b6b481e1264ac00000000000000000d05ef011503c8004502715906b50000b60000180000cd6a4f430f9e44000002f10000639d1000002e830000000170ce92208000122b6b481e1264ac00000000000000000d05ef011504c8004502715906b50000b60000180000cd6a50430f9e44000002f10000639d1000002e830000000170ce8d8ca000122b6b481e1264ac00000000000000000f07ef01f00150011504c8004502715906b50000b60000180000cd6a50430fa044000002f10000639d1000002e830000000170ce88f8c000122b6b481e1264ac00000000000000ce1107ef01f00150011504c8004502715808b50000b60000422f4f180000cd6a4fce071d430f9d44000002f10000639d1000002e830000000170ce87240000122b6b481e1264ac00000000000000000f07ef01f00150011504c8004502715906b50000b60000422f59180000430f9d44000002f10000639d1000002e830000000170ce82902000122b6b481e1264ac00000000000000000f07ef01f00150011504c8004502715906b50000b60000422f5e180000430f9f44000002f10000639d1000002e8300"
// var payload = "081d00000170cf30642000122b6b481e1264ac000000000000000003000311003212ff9b13fc20000000000170cf2bd04000122b6b481e1264ac000000000000000003000311002e12ff9b13fc20000000000170cf273c6000122b6b481e1264ac000000000000000003000311002e12ff9b13fc15000000000170cf22a88000122b6b481e1264ac000000000000000003000311003212ff9b13fc20000000000170cf1e14a000122b6b481e1264ac000000000000000003000311002a12ff9313fc09000000000170cf1980c000122b6b481e1264ac000000000000000003000311002e12ff9b13fc20000000000170cf14ece000122b6b481e1264ac000000000000000003000311002e12ff9b13fc1c000000000170cf10590000122b6b481e1264ac000000000000000003000311003212ff9b13fc15000000000170cf0bc52000122b6b481e1264ac000000000000000003000311002a12ff9713fc20000000000170cf07314000122b6b481e1264ac000000000000000003000311002a12ff9713fc20000000000170cf029d6000122b6b481e1264ac000000000000000003000311003a12ff9b13fc20000000000170cefe098000122b6b481e1264ac000000000000000003000311003212ff9713fc20000000000170cef975a000122b6b481e1264ac000000000000000003000311002a12ff9713fc24000000000170cef4e1c000122b6b481e1264ac000000000000000003000311002e12ff9713fc24000000000170cef04de000122b6b481e1264ac000000000000000003000311002a12ff9b13fc1c000000000170ceebba0000122b6b481e1264ac000000000000000003000311002a12ff9b13fc20000000000170cee7262000122b6b481e1264ac000000000000000003000311002a12ff9713fc20000000000170cee2924000122b6b481e1264ac000000000000000003000311002e12ff9713fc20000000000170ceddfe6000122b6b481e1264ac000000000000000003000311002a12ff9313fc1c000000000170ced96a8000122b6b481e1264ac000000000000000003000311002e12ff9b13fc20000000000170ced4d6a000122b6b481e1264ac000000000000000001000112ff8f000000000170ced042c000122b6b481e1264ac000000000000000001000112ff93000000000170cecbaee000122b6b481e1264ac000000000000000001000111002e000000000170cec71b0000122b6b481e1264ac0000000000000000070101000311003612ff9b13fc1500030b0000000035464ef4ee00000000000000000e0000000017fb346000000170cebdf72800122b6b481e1264ac00000000000000001307ef01f00150011504c8004502010009b50000b60000422f62180000cd6a50ce071d430f9c44000009008303f10000639dc7000000001000002e830000000170ceb9635200122b6b481e1264ac00000000000000ce0e06ef01f00150011504c800450208b50000b60000422f46180000cd6a50ce071d430f9d440000000000000170ceb9634800122b6b481e1264ac00000000000000f00d06ef01f00150011504c800450207b50000b60000422f46180000cd6a50430f9d440000000000000170ceb95f6000122b6b481e1264ac00000000000000ef0d06ef01f00150011504c800450207b50000b60000422f46180000cd6a50430f9d440000000000000170ceb8423800122b6b481e1264ac000000000000000002000002f10000639dc70000000000"
// var payload = "0c0106000000104e65772076616c7565203130323a313b"
// var payload = "0807000000f9cebb294800000000000000000000000000000000ce2b0def01f00150051505c80045020100b3001d00140016001700710016b50000b60000422f22180000cdb171ce071e4300004400000900830d270f1100ab12006113fc200f00001900001a00001b00001c00005600006800006a00006c000005f10000639dc7000000001000007bdd0c0000248e0400000000030b0000000035464ef4ee00000000000000000e0000000017fb3460000001710a2de09800122502861e104fdc00000000000000002b0def00f00050001505c80145030100b3001d00140016001700713d16b50000b60000420000180000cdb171ce071e430e694400000900830d270f11008412006513fc1c0f03e81900001a00001b00001c00005600006800006a00006c000005f10000639dc7000000001000007bdd0c0000248e0400000000030b0000000035464ef4ee00000000000000000e0000000017fb3460000001710a2d6b6800122502861e104fdc00000000000000002b0def00f00050001505c80145030100b3001d00140016001700713d16b50000b60000420000180000cdb171ce071e430e624400000900830d270f11008c12006113fc1c0f03e81900001a00001b00001c00005600006800006a00006c000005f10000639dc7000000001000007bdd0c0000248e0400000000030b0000000035464ef4ee00000000000000000e0000000017fb3460000001710a2cf63800122502861e104fdc00000000000000002b0def00f00050001505c80145030100b3001d00140016001700713d16b50000b60000420000180000cdb171ce071e430e6c4400000900830d270f11007d12006513fc1c0f03e81900001a00001b00001c00005600006800006a00006c000005f10000639dc7000000001000007bdd0c0000248e0400000000030b0000000035464ef4ee00000000000000000e0000000017fb3460000001710a2c810800122502861e104fdc00000000000000002b0def00f00050001505c80145030100b3001d00140016001700713d16b50000b60000420000180000cdb171ce071e430e684400000900830d270f11008812006513fc1c0f03e81900001a00001b00001c00005600006800006a00006c000005f10000639dc7000000001000007bdd0c0000248e0400000000030b0000000035464ef4ee00000000000000000e0000000017fb3460000001710a2c0bd800122502861e104fdc00000000000000002b0def00f00050001505c80145030100b3001d00140016001700713b16b50000b60000420000180000cdb171ce071e430e4e4400000900830d270f11007d12006513fc150f03e81900001a00001b00001c00005600006800006a00006c000005f10000639dc7000000001000007bdd0c0000248e0400000000030b0000000035464ef4ee00000000000000000e0000000017fb3460000001710a2b96a800122502861e104fdc00000000000000002b0def00f00050001505c80145030100b3001d00140016001700713d16b50000b60000420000180000cdb171ce071e430e6a4400000900830d270f11008412006513fc1c0f03e81900001a00001b00001c00005600006800006a00006c000005f10000639dc7000000001000007bdd0c0000248e0400000000030b0000000035464ef4ee00000000000000000e0000000017fb3460"
// var payload = "0c010600000010494f2049443a32312056616c75653a35"
// var payload = "0c01060000009a5665723a30332e32352e31345f3035204750533a41584e5f352e31305f333333332048773a464d42393230204d6f643a313320494d45493a33353936333331303034353835393020496e69743a323032302d332d32302032313a313020557074696d653a31383033204d41433a303031453432424430364645205350433a312830292041584c3a31204f42443a3020424c3a312e372042543a3401"

// var payload = "081d00000170cf30642000122b6b481e1264ac000000000000000003000311003212ff9b13fc20000000000170cf2bd04000122b6b481e1264ac000000000000000003000311002e12ff9b13fc20000000000170cf273c6000122b6b481e1264ac000000000000000003000311002e12ff9b13fc15000000000170cf22a88000122b6b481e1264ac000000000000000003000311003212ff9b13fc20000000000170cf1e14a000122b6b481e1264ac000000000000000003000311002a12ff9313fc09000000000170cf1980c000122b6b481e1264ac000000000000000003000311002e12ff9b13fc20000000000170cf14ece000122b6b481e1264ac000000000000000003000311002e12ff9b13fc1c000000000170cf10590000122b6b481e1264ac000000000000000003000311003212ff9b13fc15000000000170cf0bc52000122b6b481e1264ac000000000000000003000311002a12ff9713fc20000000000170cf07314000122b6b481e1264ac000000000000000003000311002a12ff9713fc20000000000170cf029d6000122b6b481e1264ac000000000000000003000311003a12ff9b13fc20000000000170cefe098000122b6b481e1264ac000000000000000003000311003212ff9713fc20000000000170cef975a000122b6b481e1264ac000000000000000003000311002a12ff9713fc24000000000170cef4e1c000122b6b481e1264ac000000000000000003000311002e12ff9713fc24000000000170cef04de000122b6b481e1264ac000000000000000003000311002a12ff9b13fc1c000000000170ceebba0000122b6b481e1264ac000000000000000003000311002a12ff9b13fc20000000000170cee7262000122b6b481e1264ac000000000000000003000311002a12ff9713fc20000000000170cee2924000122b6b481e1264ac000000000000000003000311002e12ff9713fc20000000000170ceddfe6000122b6b481e1264ac000000000000000003000311002a12ff9313fc1c000000000170ced96a8000122b6b481e1264ac000000000000000003000311002e12ff9b13fc20000000000170ced4d6a000122b6b481e1264ac000000000000000001000112ff8f000000000170ced042c000122b6b481e1264ac000000000000000001000112ff93000000000170cecbaee000122b6b481e1264ac000000000000000001000111002e000000000170cec71b0000122b6b481e1264ac0000000000000000070101000311003612ff9b13fc1500030b0000000035464ef4ee00000000000000000e0000000017fb346000000170cebdf72800122b6b481e1264ac00000000000000001307ef01f00150011504c8004502010009b50000b60000422f62180000cd6a50ce071d430f9c44000009008303f10000639dc7000000001000002e830000000170ceb9635200122b6b481e1264ac00000000000000ce0e06ef01f00150011504c800450208b50000b60000422f46180000cd6a50ce071d430f9d440000000000000170ceb9634800122b6b481e1264ac00000000000000f00d06ef01f00150011504c800450207b50000b60000422f46180000cd6a50430f9d440000000000000170ceb95f6000122b6b481e1264ac00000000000000ef0d06ef01f00150011504c800450207b50000b60000422f46180000cd6a50430f9d440000000000000170ceb8423800122b6b481e1264ac000000000000000002000002f10000639dc70000000000"00000000000004c50807000000f9d004722800000000000000000000000000000000002b0def01f00150011505c80045020100b3001d00140016001700715916b50000b60000422f64180000cd6a4fce071d430fa04400000900830d270f11012812ff3913fc4b0f00001900001a00001b00001c00005600006800006a00006c000005f10000639dc70000000010000061520c00001ea90400000000030b0000000035464ef4ee00000000000000000e0000000017fb3460000000f9cfffde4800000000000000000000000000000000002b0def01f00150011505c80045020100b3001d00140016001700715916b50000b60000422f54180000cd6a4fce071d430fa04400000900830d270f11012812ff3913fc570f00001900001a00001b00001c00005600006800006a00006c000005f10000639dc70000000010000061520c00001ea90400000000030b0000000035464ef4ee00000000000000000e0000000017fb3460000000f9cffb4a6800000000000000000000000000000000002b0def01f00150011505c80045020100b3001d00140016001700715916b50000b60000422f5d180000cd6a4fce071d430fa04400000900830d270f11013812ff3513fc530f00001900001a00001b00001c00005600006800006a00006c000005f10000639dc70000000010000061520c00001ea90400000000030b000000003546
// 2020-03-17 17:05:27,555 [nioEventLoopGroup-4-12] ERROR o.t.i.c.s.TCPSimpleChannelInboundHandler - sessionId + msgBytes bc911f71-1af3-4e52-befa-feac715b38d4 4ef4ee00000000000000000e0000000017fb3460000000f9cff6b68800000000000000000000000000000000002b0def01f00150011505c80045020100b3001d00140016001700715916b50000b60000422f50180000cd6a4fce071d430fa04400000900830d270f11012812ff3913fc5b0f00001900001a00001b00001c00005600006800006a00006c000005f10000639dc70000000010000061520c00001ea90400000000030b0000000035464ef4ee00000000000000000e0000000017fb3460000000f9cff222a800000000000000000000000000000000002b0def01f00150011505c80045020100b3001d00140016001700715916b50000b60000422f52180000cd6a4fce071d430fa04400000900830d270f11012c12ff2e13fc430f00001900001a00001b00001c00005600006800006a00006c000005f10000639dc70000000010000061520c00001ea90400000000030b0000000035464ef4ee00000000000000000e0000000017fb3460000000f9cfed8ec800000000000000000000000000000000002b0def01f00150011505c80045020100b3001d00140016001700715916b50000b60000422f5b180000cd6a4fce071d430fa04400000900830d270f11012c12ff3513fc5f0f00001900001a00001b00001c00005600006800006a00006c000005f10000639dc70000000010000061520c00001ea90400000000030b0000000035464ef4ee00000000000000000e0000000017fb3460000000f9cfe8fae800000000000000000000000000000000002b0def01f00150011505c80045020100b3001d00140016001700715916b50000b60000422f58180000cd6a4fce071d430fa04400000900830d270f11012812ff3513fc5b0f00001900001a00001b00001c00005600006800006a00006c000005f10000639dc70000000010000061520c00001ea90400000000030b0000000035464ef4ee00000000000000000e0000000017fb3460070000b7c2
// var payload = "19: "Axis Z (mG)",";
//  0811        ts
//  00 00 00 f9 d0 e2 6a 6a
//  00
//  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
//  f0 0f 07 ef00f00050001503c8004502715306b50000b
//    010101010202020203030404050606
//     15  n1                                                  n2                                                                        n4                                    n8
//  00 0f  07  ef 01 f0 01  50 01  15 04  c8 00  45 02  71 5a  06  b5 00  00   b6 00 00   42 2f 45    18  00 00  43 0f b3   44  00  00   02  f1 00 00 63 9d   10 00 00 00 00   00
//    ts
//  00 00 00 f9 cf 2d 4f f0
//  00
//  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
//  00 0f 07 ef01f00150011504c8004502715a06b50000b60000422f47180000430fb344000002f10000639d100000000000000000f9cf28bc1000000000000000000000000000000000000f07ef01f00150011504c8004502715a06b50000b60000422f49180000430fb344000002f10000639d100000000000000000f9cf242830000000000000000000
//              0    1      2      3      4      5      6          0          1           2          3           4          5                0             1
var metadata = {
    "integrationName": "CUSTOM",
    "imei": "359633100458590",
    // "command0": "getinfo"
    "request": "getver"
};

/** Decoder **/

// decode payload to string
// var payloadStr = decodeToString(payload);

// decode payload to JSON
// var data = decodeToJson(payload);


// var deviceType = 'teltonik';
// var customerName = 'customer';
// var groupName = 'thermostat devices';
// use assetName and assetType instead of deviceName and deviceType
// to automatically create assets instead of devices.
// var assetName = 'Asset A';
// var assetType = 'building';

// Result object with device/asset attributes/telemetry data

function Decoder(payload, metadata) {
    var constants = {
        'priority':
            {
                0: "Low",
                1: "High",
                2: "Panic",
                3: "Security"
            },
        'idIo':
            {
                0: "00000",
                1: "Digital Input 1",
                2: "00002",
                3: "00003",
                4: "Pulse Counter DIN1",
                5: "00005",
                6: "00006",
                7: "00007",
                8: "00008",
                9: "Analog Input 1",
                10: "00010",
                11: "ICCID1",
                12: "FC By GPS (ml)",
                13: "FC AVG By GPS (l/h*100)",
                14: "ICCID4",
                15: "Eco score",
                16: "Total Odometr (m)",
                17: "Axis X (mG)",
                18: "Axis Y (mG)",
                19: "Axis Z (mG)",
                20: "BLE Battery #2 (%)",
                21: {
                    "GSM Signal":
                        {
                            0: "00",
                            1: "01",
                            2: "02",
                            3: "03",
                            4: "Good Signal",
                            5: "Excellent Signal"
                        }
                },
                22: "BLE Battery #3 (%)",
                23: "BLE Battery #4 (%)",
                24: "Speed km/h",
                25: "BLE Temp #1 (C)",
                26: "BLE Temp #2 (C)",
                27: "BLE Temp #3 (C)",
                28: "BLE Temp #4 (C)",
                29: "BLE Battery #1 (%)",
                30: "00030",
                31: "00031",
                32: "00032",
                33: "00033",
                34: "00034",
                35: "00035",
                36: "00036",
                37: "00037",
                38: "00038",
                39: "00039",
                40: "00040",
                41: "00041",
                42: "00042",
                43: "00043",
                44: "00044",
                45: "00045",
                46: "00046",
                47: "00047",
                48: "00048",
                49: "00049",
                50: "00050",
                51: "00051",
                52: "00052",
                53: "00053",
                54: "00054",
                55: "00055",
                56: "00056",
                57: "00057",
                58: "00058",
                59: "00059",
                60: "00060",
                61: "00061",
                62: "00062",
                63: "00063",
                64: "00064",
                65: "00065",
                66: "External Voltage mV",
                67: "Battery Voltage mV",
                68: "Battery Current mA",
                69: {
                    "GNSS Status":
                        {
                            0: "00",
                            1: "01",
                            2: "Activated",
                            3: "03"
                        }
                },
                70: "00070",
                71: "00071",
                72: "00072",
                73: "00073",
                74: "00074",
                75: "00075",
                76: "00076",
                77: "00077",
                78: "00078",
                79: "00079",
                80: "Data Mode",
                81: "00081",
                82: "00082",
                83: "00083",
                84: "00084",
                85: "00085",
                86: "BLE Humidity #1 (%RH)",
                87: "00087",
                88: "00088",
                89: "00089",
                90: "00090",
                91: "00091",
                92: "00092",
                93: "00093",
                94: "00094",
                95: "00095",
                96: "00096",
                97: "00097",
                98: "00098",
                99: "00099",
                100: "00100",
                101: "00101",
                102: "00102",
                103: "00103",
                104: "BLE Humidity #2 (%RH)",
                105: "00105",
                106: "BLE Humidity #3 (%RH)",
                107: "00107",
                108: "BLE Humidity #4 (%RH)",
                109: "00109",
                110: "00110",
                111: "00111",
                112: "00112",
                113: "Internel Battery Status %",
                114: "00114",
                115: "00115",
                116: "00116",
                117: "00117",
                118: "00118",
                119: "00119",
                120: "00120",
                121: "00121",
                122: "00122",
                123: "00123",
                124: "00124",
                125: "00125",
                126: "00126",
                127: "00127",
                128: "00128",
                129: "00129",
                130: "00130",
                131: "00131",
                132: "00132",
                133: "00133",
                134: "00134",
                135: "00135",
                136: "00136",
                137: "00137",
                138: "00138",
                139: "00139",
                140: "00140",
                141: "00141",
                142: "00142",
                143: "00143",
                144: "00144",
                145: "00145",
                146: "00146",
                147: "00147",
                148: "00148",
                149: "00149",
                150: "00150",
                151: "00151",
                152: "00152",
                153: "00153",
                154: "00154",
                155: "00155",
                156: "00156",
                157: "00157",
                158: "00158",
                159: "00159",
                160: "00160",
                161: "00161",
                162: "00162",
                163: "00163",
                164: "00164",
                165: "00165",
                166: "00166",
                167: "00167",
                168: "00168",
                169: "00169",
                170: "00170",
                171: "00171",
                172: "00172",
                173: "00173",
                174: "00174",
                175: "00175",
                176: "00176",
                177: "00177",
                178: "00178",
                179: "Digital Output 1",
                180: "00180",
                181: "GNSS PDOP",
                182: "GNSS NDOP",
                183: "00183",
                184: "00184",
                185: "00185",
                186: "00186",
                187: "00187",
                188: "00188",
                189: "00189",
                190: "00190",
                191: "00191",
                192: "00192",
                193: "00193",
                194: "00194",
                195: "00195",
                196: "00196",
                197: "00197",
                198: "00198",
                199: "Trip Odometr (m)",
                200: "Sllep Mode",
                201: "00201",
                202: "00202",
                203: "00203",
                204: "00204",
                205: "GSM Cell ID",
                206: "GSM Area Code",
                207: "00207",
                208: "00208",
                209: "00209",
                210: "00210",
                211: "00211",
                212: "00212",
                213: "00123",
                214: "00124",
                215: "00125",
                216: "00126",
                217: "00217",
                218: "00218",
                219: "00219",
                220: "00220",
                221: "00221",
                222: "00222",
                223: "00223",
                224: "00224",
                225: "00225",
                226: "00226",
                227: "00227",
                228: "00228",
                229: "00229",
                230: "00230",
                231: "00231",
                232: "00232",
                233: "00233",
                234: "00234",
                235: "00235",
                236: "00236",
                237: "00237",
                238: "User ID",
                239: "Ignition",
                240: "Movement",
                241: "Actual Operator Code",
                242: "00242",
                243: "00243",
                244: "00244",
                245: "00245",
                246: "00246",
                247: "00247",
                248: "00248",
                249: "00249",
                250: "00250",
                251: "00251",
                252: "00252",
                253: "00253",
                254: "00254",
                255: "00255",
                256: "00256",
                257: "00257",
                258: "00258",
                259: "00259",
                260: "00260",
                261: "00261",
                262: "00262",
                263: "00263",
                264: "00264",
                265: "00265",
                266: "00266",
                267: "00267",
                268: "00268",
                269: "00269",
                270: "00270",
                271: "00271",
                272: "00272",
                273: "00273",
                274: "00274",
                275: "00275",
                276: "00276",
                277: "00277",
                278: "00278",
                279: "00279",
                280: "00280",
                281: "00281",
                282: "00282",
                283: "00283",
                284: "00284",
                285: "00285",
                286: "00286",
                287: "00287",
                288: "00288",
                289: "00289",
                290: "00290",
                291: "00291",
                292: "00292",
                293: "00293",
                294: "00294",
                295: "00295",
                296: "00296",
                297: "00297",
                298: "00298",
                299: "00299"


            }
    };

    var payoadStr = decodeToJson(payload);
    var y = 0;
    var lenByte = 2;
    var deviceName = getNameDevice('FMB920_');
    var deviceType = 'teltonik';
    var deviceModel = 'FMB920';
    var request = "Downlink";
    var response = "Uplink";

    var result = setPayload();

    function setPayload() {
        if (payoadStr !== null && payoadStr.length > 0 && metadata.hasOwnProperty('imei')) {
            return getPayload();
        }
        return null;
    }

    function getPayload() {
        var codec = parseInt(payoadStr.substr(y, lenByte), 16);
        y += lenByte;
        var rez = {
            deviceName: deviceName,
            deviceType: deviceType,
            attributes: {
                model: deviceModel,
                serialNumber: metadata.imei,
                integrationName: metadata.integrationName,
                codec: codec
            },
            telemetry: getTelemetry(codec)
        };
        return rez;
    }

    function getTelemetry(codec) {
        if (codec === 8) {
            return getTelemetry08();
        } else if (codec === 12) {
            return getTelemetry12();
        }
        else if (codec === 22) {
            return getTelemetry22();
        }
    }


    function getTelemetry08() {
        var telemetry = [];
        var numberData1 = parseInt(payoadStr.substr(y, lenByte), 16);
        y += lenByte;
        for (var i = 0; i < numberData1; i++) {
            var len = 16;
            var timeMS = parseInt(payoadStr.substr(y, len), 16);
            y += len;
            var avlData = {
                ts: timeMS,
                values: getAVLData()
            };

            telemetry.push(avlData);
        }
        var ts = new Date().getTime();
        var maxLenth = 400;
        var telemtryStr = JSON.stringify(telemetry[0]);
        if (telemtryStr.length> maxLenth) telemtryStr = telemtryStr.substring(0, maxLenth) + "...";
        var logs = {
            ts: ts,
            values: {
                "logs": request + ": 1 " + response + ": " + telemtryStr
            }
        };


        telemetry.push(logs);

        return telemetry;
    }

    function getTelemetry12() {
        var telemetry = [];
        var quantity = parseInt(payoadStr.substr(y, lenByte), 16);
        y += lenByte;
        var type = parseInt(payoadStr.substr(y, lenByte), 16);
        y += lenByte;
        var ts = new Date().getTime();
        var responseData = {
            ts: ts,
            values: getResponse()
        };
        telemetry.push(responseData);
        return telemetry;
    }


    function getTelemetry22() {
        var telemetry = [];
        var ts = new Date().getTime();
        var responseData = {
            ts: ts,
            values: {
                "logs":  metadata["request"]  + ": " + payoadStr.substr(y)
            }
        };
        telemetry.push(responseData);
        return telemetry;
    }

    function getAVLData() {
        var priority = constants.priority[parseInt(payoadStr.substr(y, lenByte), 16)];
        y += lenByte;
        len = 30;
        var gpsElementStr = payoadStr.substr(y, len);
        y += len;
        var avlData = {
            priority: priority,
            longitude: getLatLongToStr(gpsElementStr.substr(0, 8)),
            latitude: getLatLongToStr(gpsElementStr.substr(8, 8)),
            altitude: parseInt(gpsElementStr.substr(16, 4), 16),
            angle: parseInt(gpsElementStr.substr(20, 4), 16),
            satellites: parseInt(gpsElementStr.substr(24, 2), 16),
            speed: parseInt(gpsElementStr.substr(26, 4), 16)
        };
        addIoElement(avlData);
        return avlData;
    }

    function getLatLongToStr(str) {
        var strInt = parseInt(str, 16);
        var strVal = strInt.toString();
        return strInt > 0 ? strVal.substring(0, 2) + "." + strVal.substring(2) : strVal;
    }


    function getResponse() {
        var len = 8;
        var responseSize = parseInt(payoadStr.substr(y, len), 16);
        y += len;
        len = 2 * responseSize;
        var responseValHex = payoadStr.substr(y, len);
        y += len;
        var key = metadata["request"];
        var resposeValAnsii = hex_to_ascii(responseValHex);
        var result = {
            "logs": request + ": " + metadata["request"] + " " + response + ": " + resposeValAnsii
        };
        return result;
    }

    function getNameDevice(deviceName) {
        if (metadata.hasOwnProperty('imei')) {
            return deviceName + metadata['imei'];
        } else {
            return deviceName;
        }
    }

    function addIoElement(avlData) {
        avlData.eventIoId = parseInt(payoadStr.substr(y, lenByte), 16);
        y += lenByte;
        var totalIo = parseInt(payoadStr.substr(y, lenByte), 16);
        y += lenByte;
        var oneByteIo = parseInt(payoadStr.substr(y, lenByte), 16);
        y += lenByte;
        if (oneByteIo > 0) {
            getByteIo(avlData, oneByteIo, 2);
        }
        var twoByteIo = parseInt(payoadStr.substr(y, lenByte), 16);
        y += lenByte;
        if (twoByteIo > 0) {
            getByteIo(avlData, twoByteIo, 4);
        }
        var forByteIo = parseInt(payoadStr.substr(y, lenByte), 16);
        y += lenByte;
        if (forByteIo > 0) {
            getByteIo(avlData, forByteIo, 8);
        }
        var eightByteIo = parseInt(payoadStr.substr(y, lenByte), 16);
        y += lenByte;
        if (eightByteIo > 0) {
            getByteIo(avlData, eightByteIo, 16);
        }
    }

    function getByteIo(avlData, cnt, lenB) {
        var nameIoId;
        var val;
        for (var i = 0; i < cnt * 2; i += 2) {
            var ioId = parseInt(payoadStr.substr(y, lenByte), 16);
            if (constants.idIo[ioId] instanceof Object) {
                for (var key in constants.idIo[ioId]) {
                    nameIoId = key;
                    y += lenByte;
                    val = constants.idIo[ioId][key][parseInt(payoadStr.substr(y, lenB), 16)];
                    y += lenB;
                }
            } else {
                nameIoId = constants.idIo[ioId];
                y += lenByte;
                val = hexToInt(payoadStr.substr(y, lenB));
                y += lenB;
            }
            avlData[nameIoId] = val;
        }
    }

    function hexToInt(hex) {
        if (hex.length % 2 !== 0) {
            hex = "0" + hex;
        }
        var num = parseInt(hex, 16);
        var maxVal = Math.pow(2, hex.length / 2 * 8);
        if (num > maxVal / 2 - 1) {
            num = num - maxVal
        }
        return num;
    }

    function decodeToJson(payoadStr) {
        try {
            return JSON.parse(String.fromCharCode.apply(String, payoadStr));
        } catch (e) {
            return JSON.parse(JSON.stringify(payoadStr));
        }
    }

    function hex_to_ascii(str1) {
        var hex = str1.toString();
        var str = '';
        for (var n = 0; n < hex.length; n += 2) {
            str += String.fromCharCode(parseInt(hex.substr(n, 2), 16));
        }
        return str;
    }

    return result;
}

var result = Decoder(payload, metadata);
console.log(JSON.stringify(result));
